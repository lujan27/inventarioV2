<%- include('../includes/sidebar.ejs') %>
<%- include('../includes/header.ejs') %>



<body>
    <section class="home-section">
        <%- include('../includes/nav.ejs') %>

        <div class="container mt-4">
        <%- include('../includes/alerts.ejs') %>

            <div class="container-fluid pt-4 mt-4">
                <div class="subcontenedor">
                    <div class="bloque activo">
                      <div class="justify-content-center row">

                        <h2>Inventario Rancho Principal:</h2>
                            <table id="inventoryTable" data-column-orderable="1, 1, 0, 1, 1, 0" class="w-100 data-table table table-striped">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">Rancho</th>
                                        <th scope="col">Materia Prima</th>
                                        <th scope="col">Descripcion</th>
                                        <th scope="col">Cantidad</th>
                                        <th scope="col">Unidad de medida</th>                                        
                                        <th colspan="2">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% stockPrin.forEach((stock, i) => { %> 
                                        <tr id="id-<%= stock._id%>">
                                            <td><%= stock.ranch_owner %> </td>
                                            <td class="product-name" data-id="<%=i%>"><%= stock.name %> </td>
                                            <td class="product-description" data-id="<%=i%>"><%= stock.description %> </td>
                                            <td><%= stock.quantity %> </td>
                                            <td class="product-unit" data-id="<%=i%>"><%= stock.unit %> </td>                                            
                                            <td>
                                                <button id="orderItem" class="btn btn-outline-primary my-2 my-sm-0 btnOrder" type="button" data-id="<%= i %>">
                                                    <ion-icon name="receipt-outline" class="pr-1"></ion-icon> Pedido
                                                </button>
                                            </td>
                                        </tr>
                                        <% }); %> 
                                
                                        

                                </tbody>
                                <caption class="pl-2">Inventario Principal</caption>
                            </table>
                      </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <form class="mb-5 pb-5" action="/add-order" method="post">
                    <h3>Realizar Pedidos</h3>
                    <div id="formOrder" class="container-fluid px-lg-5 px-3 mb-4">
                        <input type="text" value="<%=doc_title%>" name="module" hidden> <!-- No eliminar, permite obtener el nombre de la pagina actual -->
                        <input id="role" value="<%=user.role%>" hidden>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-dark btn-block" id="Gdisabled" disabled>Guardar</button>
                    </div>
                    <br>
                </form>
            </div>

            </div>

        </div>
    </div>  
    <br>
    <%- include('../includes/foot.ejs') %>
    </section>

<%- include('../includes/scripts.ejs') %>
<script src="/js/admin/order.js"></script>
<%- include('../includes/footer.ejs') %>