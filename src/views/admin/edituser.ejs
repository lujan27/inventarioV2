<%- include('../includes/sidebar.ejs') %>
<%- include('../includes/header.ejs') %>


<body>
    <section class="home-section">
        <%- include('../includes/nav.ejs') %>
    <div class="container mt-2">
        <%- include('../includes/alerts.ejs') %>

            <div class="row pt-4 mt-4">
                <div class="col-md-8 mx-auto pb-4 mb-4">

                <a href="/admin/allusers" class="btn btn-outline-dark btn-sm mb-4">
                    <i class='bx bx-arrow-back pr-1'></i>Regresar
                </a>

                    <div class="card">
                        <div class="card-header text-center">
                            EDITAR USUARIO
                        </div>
                        <div class="card-body">
                            <form action="/admin/edituser/<%= edit._id%>?_method=PUT" method="POST">
                                <% if(edit){%> 
                                
                                <div class="form-group">
                                    <label>Nombre del empleado: </label>
                                    <input type="text" class="form-control" name="name" value="<%= edit.name%>" required>
                                </div>
                                <div class="form-group">
                                    <label>Apellido del empleado: </label>
                                    <input type="text" class="form-control" name="lastname" value="<%= edit.lastname%>" required>
                                </div>
                                <div class="form-group">
                                    <label>Nombre de usuario: </label>
                                    <input type="text" class="form-control" name="username" value="<%= edit.username%>" required>
                                </div>
                                <div class="form-group">
                                    <label>Correo electronico: </label>
                                    <input type="email" class="form-control" name="email" value="<%= edit.email%>" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Contraseña: </label>
                                    <input autocomplete="new-password" type="password" class="form-control" name="password" value="" placeholder="Ingresa una nueva contraseña...." required>
                                </div>
                
                                <div class="form-group">
                                    <label>Rol</label>
                                    <select class="custom-select" id="listRol" name="role" value="<%= edit.role%>">
                                            <option value="">Asigna un rol al usuario...</option>
                                            <option <%= edit.role =='administrador' ? "selected" : '' %> value="administrador">Administrador</option>
                                            <option <%= edit.role =='coordinador' ? "selected" : '' %> value="coordinador">Coordinador</option>
                                            <option <%= edit.role =='usuario' ? "selected" : '' %> value="usuario">Usuario</option>
                                    </select>
                                </div>
                                <div class="form-group" name="formulario">
                                    <label>Recinto al que pertenece: </label>
                                    <select class="custom-select" name="ranch" id="" value="<%= edit.ranch%>">
                                        <option value="">Asigna el rancho al que pertenece...</option>
                                        <% ranches.forEach(rancho => { %> 
                                            <option value="<%=rancho.ranch_name%>"><%=rancho.ranch_name%></option>
                                        <% }) %> 
                                    </select>
                                </div>
                                <% }; %>
                                <div class="form-group">
                                    <button class="btn btn-outline-primary my-2 my-sm-0 btn-block" id="Gdisabled">Guardar</button>
                                </div>
                                
                            </form>
                        </div>
                    </div>


                </div>
            </div>


    </div>
    <br>
    <%- include('../includes/foot.ejs') %>
</section>

<%- include('../includes/scripts') %>
<%- include('../includes/footer.ejs') %>